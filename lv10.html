<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Level 10</title>
<link rel="stylesheet" href="css/style.css">
<style>
#stats {
  margin-top: 10px;
  font-size: 14px;
}
#timer {
  font-size: 20px;
  margin: 10px 0;
  font-weight: bold;
}
#ending {
  display: none;
  margin-top: 20px;
  padding: 15px;
  border: 1px solid #0f0;
}
</style>
</head>
<body>

<div class="game">
<h3>LEVEL 10 ‚Äì Machine Precision</h3>
<p>Nh·∫•n n√∫t <b>1 l·∫ßn</b>, m·ªói l·∫ßn c√°ch nhau <b>1000 ms ¬± 300 ms</b></p>

<div id="timer">0 ms</div>

<button onclick="clickBtn()">EXECUTE</button>

<p id="count">0 / 1</p>

<div id="stats">
‚ùå L·ªói: <span id="fail">0</span><br>
‚è± Chu k·ª≥ chu·∫©n: 1000 ms
</div>

<div class="note">
ü§ñ Robot ho·∫°t ƒë·ªông theo th·ªùi gian tuy·ªát ƒë·ªëi.
</div>

<div id="ending">
<h3>ENDING</h3>
<p>
Chu·ªói h√†nh vi c·ªßa b·∫°n ·ªïn ƒë·ªãnh v√† ch√≠nh x√°c.<br>
<strong>K·∫æT LU·∫¨N:</strong> B·∫°n ƒë√£ h√†nh x·ª≠ nh∆∞ m·ªôt ROBOT ü§ñ
</p>
</div>
</div>

<script>
let step = 0;
let startTime = null;
let timerInterval = null;

const REQUIRED = 1000;
const TOLERANCE = 300;

function startTimer() {
  clearInterval(timerInterval);
  timerInterval = setInterval(() => {
    if (startTime !== null) {
      const elapsed = Math.round(performance.now() - startTime);
      document.getElementById("timer").innerText = elapsed + " ms";
    }
  }, 16);
}

function clickBtn() {
  const now = performance.now();

  // l·∫ßn 1: b·∫Øt ƒë·∫ßu ƒëo
  if (step === 0) {
    startTime = now;
    step = 1;
    startTimer();
    document.getElementById("count").innerText = "1 / 1";
    return;
  }

  // l·∫ßn 2: ki·ªÉm tra
  const elapsed = now - startTime;
  clearInterval(timerInterval);

  if (Math.abs(elapsed - REQUIRED) <= TOLERANCE) {
    finish();
  } else {
    alert("Sai chu k·ª≥ ‚Üí h·ªá th·ªëng reset");
    reset();
  }
}

function reset() {
  step = 0;
  startTime = null;
  document.getElementById("count").innerText = "0 / 1";
  document.getElementById("timer").innerText = "0 ms";
  clearInterval(timerInterval);
}

function finish() {
  document.querySelector("button").disabled = true;
  document.getElementById("ending").style.display = "block";
}
</script>


</body>
</html>
