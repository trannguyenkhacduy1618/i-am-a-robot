<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Level 7</title>
<link rel="stylesheet" href="css/style.css">
</head>
<body>

<div class="game">
  <h3>LEVEL 7 â€“ Verification</h3>
  <p id="task"></p>

  <button onclick="action()">ACTION</button>

  <p id="status"></p>
  <p id="timer"></p>

  <div class="note">
    ğŸ¤– Robot chá»‰ xÃ¡c nháº­n khi Táº¤T Cáº¢ Ä‘iá»u kiá»‡n Ä‘á»u Ä‘Ãºng.
  </div>
</div>

<script>
// sinh yÃªu cáº§u ngáº«u nhiÃªn
const requiredClicks = Math.floor(Math.random() * 3) + 3; // 3â€“5 láº§n
const timeLimit = 3000; // 3 giÃ¢y cá»‘ Ä‘á»‹nh

let count = 0;
let startTime = null;
let verified = false;

document.getElementById("task").innerText =
  `Click ${requiredClicks} láº§n trong ${timeLimit / 1000} giÃ¢y`;

function action() {
  if (verified) return;

  if (count === 0) {
    startTime = performance.now();
  }

  count++;
  document.getElementById("status").innerText =
    `ÄÃ£ click: ${count} / ${requiredClicks}`;

  const now = performance.now();
  const elapsed = Math.round(now - startTime);
  document.getElementById("timer").innerText =
    `â± ${elapsed} ms`;

  // click quÃ¡ sá»‘ â†’ fail
  if (count > requiredClicks) {
    fail("Sai sá»‘ láº§n");
    return;
  }

  // Ä‘á»§ sá»‘ â†’ kiá»ƒm tra thá»i gian
  if (count === requiredClicks) {
    if (elapsed <= timeLimit) {
      verified = true;
      alert("VERIFIED ğŸ¤–\nRobot xÃ¡c nháº­n thÃ nh cÃ´ng");
      location.href = "lv8.html";
    } else {
      fail("QuÃ¡ thá»i gian");
    }
  }
}

function fail(reason) {
  alert("FAILED âŒ\n" + reason + "\nRobot reset");
  reset();
}

function reset() {
  count = 0;
  startTime = null;
  document.getElementById("status").innerText = "";
  document.getElementById("timer").innerText = "";
}
</script>

</body>
</html>
